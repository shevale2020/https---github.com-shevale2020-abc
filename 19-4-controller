 
  public class TaskInfo
    {
        public string TaskName { get; set; }
        //value is used for calculate task number
        public int? value { get; set; }
        //if any extra param to send
        public string extra { get; set; }
        public string TeamName { get; set; }
        // public int? TeamId { get; set; }
        public int? WorkbasketTaskId { get; set; }
        public int? DependsOnWorkbasketTaskId { get; set; }
        public DateTime? EndDateInt { get; set; }

    }
    public class ReportController : Controller
    {
 
 [HttpGet]
        public JsonResult Graphdata(int LocationId, string PeriodText)
        {
            //Create sample data
            try
            {
                string result = "ERROR";
                string message = Constants.ErrorSessionExpired;
                int tenantId = SessionWrapper.TenantId;

                ReportClass _report = new ReportClass();
                var responseData = _report.GetTaskTimelineChartReport(LocationId, PeriodText, tenantId);
                //var task = JsonConvert.DeserializeObject(responseData);
                System.Web.Script.Serialization.JavaScriptSerializer jSearializer =
                   new System.Web.Script.Serialization.JavaScriptSerializer();
                List<TaskInfo> taskDetails = new List<TaskInfo>();
                taskDetails = JsonConvert.DeserializeObject<List<TaskInfo>>(jSearializer.Serialize(responseData));
                if (taskDetails != null)
                {
                    List<TaskInfo> _info = new List<TaskInfo>();
                    _info = taskDetails;

                    // logic for add value of task date wise task number assign ..same date it will 1,2,3,4 etc
                    //string teamOldValue = "";
                    var teamCollection = (_info.GroupBy(x => x.TeamName)
                                                       .Select(TeamName => new
                                                       {
                                                           TeamName = TeamName.Key
                                                       }));
                    int count = 0;
                    var color = (teamCollection.Select(TeamName => new
                    {
                        value = count++,
                        name = TeamName.TeamName
                    }).ToList());

                    int teamCounter = 0;
                    foreach (var teamGroup in teamCollection)
                    {
                        string teamname = teamGroup.TeamName;

                        int teamDateMaxCount = _info.Where(x => x.TeamName == teamname).GroupBy(x => x.EndDateInt)
                                             .Max(g => g.Count());
                        int counter = 1;
                        string oldValue = "";
                        foreach (var item in _info.Where(x => x.TeamName == teamname).OrderBy(x => x.EndDateInt))
                        {
                            if (oldValue != item.EndDateInt.ToString())
                            {
                                counter = 1;
                            }
                            else
                            {
                                counter++;
                            }
                           // oldValue = item.EndDateInt.ToString("dd/MM/yyyy");
                            oldValue = item.EndDateInt.ToString();
                            item.value = teamCounter + counter;
                            item.extra = color.Where(x => x.name == teamname).First().value.ToString();
                        }
                        teamCounter += teamDateMaxCount;
                    }
                    //here customise column name
                    var output = from i in _info
                                 select new
                                 {
                                     TaskTitle = i.TaskName,
                                     TaskNumber = i.value,
                                     TaskDate = i.EndDateInt.ToString(),
                                     TaskId = i.WorkbasketTaskId,
                                     extra = i.extra,
                                     DependsOnWorkbasketTaskId = i.DependsOnWorkbasketTaskId,
                                     //DependantTaskDate = _info.Where(x => x.WorkbasketTaskId == i.DependsOnWorkbasketTaskId).FirstOrDefault().EndDateInt.ToString("dd/MM/yyyy"),
                                     //DependantTaskNumber = _info.Where(x => x.WorkbasketTaskId == i.DependsOnWorkbasketTaskId).FirstOrDefault().value,
                                     //color = i.EndDateInt >= _info.Where(x => x.WorkbasketTaskId == i.DependsOnWorkbasketTaskId).FirstOrDefault().EndDateInt ? "rgb(44, 160, 44)" : "rgb(214, 39, 40)", //green/red color
                                     DependantTaskDate = _info.Where(x => x.WorkbasketTaskId == i.DependsOnWorkbasketTaskId).Count() > 0 ? _info.Where(x => x.WorkbasketTaskId == i.DependsOnWorkbasketTaskId).FirstOrDefault().EndDateInt.ToString("dd/MM/yyyy") : i.EndDateInt.ToString("dd/MM/yyyy"),
                                     DependantTaskNumber = _info.Where(x => x.WorkbasketTaskId == i.DependsOnWorkbasketTaskId).Count() > 0 ? _info.Where(x => x.WorkbasketTaskId == i.DependsOnWorkbasketTaskId).FirstOrDefault().value : i.value,
                                     color = _info.Where(x => x.WorkbasketTaskId == i.DependsOnWorkbasketTaskId).Count() > 0 ? (i.EndDateInt >= _info.Where(x => x.WorkbasketTaskId == i.DependsOnWorkbasketTaskId).FirstOrDefault().EndDateInt ? "rgb(44, 160, 44)" : "rgb(214, 39, 40)") : "rgb(214, 39, 40)", //green/red color
                                     TeamName = i.TeamName
                                 };

                    return Json(JsonConvert.SerializeObject(output), JsonRequestBehavior.AllowGet);
                }
                else
                {
                    return Json(new { Result = "ERROR", Message = "Database Record Problem", Record = taskDetails }, JsonRequestBehavior.AllowGet);
                }

            }
            catch (Exception ex)
            {
                return Json(new { Result = "ERROR", Message = "Database Record Problem" }, JsonRequestBehavior.AllowGet);
            }
            //return Json(new { Result = "ERROR", Message = Constants.ErrorSessionExpired });

        }
        }

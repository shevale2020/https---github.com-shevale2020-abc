@model IEnumerable<eCloseDataAccessLayer.Models.SummaryInfo>
@using ECloseWebApp.Models;
@using ECloseWebApp.BuisnessEntities;
@using ECloseBL.Entities;

@{
    ViewBag.Title = "SummaryReport";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    $('#inputEntity').hide();
    $('#LoadRecords').hide();
    $('#divFilter').hide();

    $(document).ready(function () {

        $('#datetimepickerSummary').datetimepicker({
            format: 'DD-MMM-YYYY',
        });

    });
</script>
<div class="panel panel-white">
    <form action="/Report/SummeryReport" method="post" target="_self">
        <div class="panel-body">
            <div class="row">

                <div class="col-md-3">
                    <div class="form-group  ">
                        <label title="" runat="server">
                            Date :
                        </label>
                        <div class='input-group date' id='datetimepickerSummary'>
                            <input type='text' class="form-control" name="datepicker" id="summaryDate" onkeydown="return false;" onpaste="return false;" />
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar">
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel-footer">
            <button id="btnSummaryReport" class="btn btn-primary" type="submit"><span id="btnSummaryReport">Generate SummaryReport</span></button>
        </div>

        <table class="table">
            <thead>
            <th>
                @Html.DisplayNameFor(model => model.LocationId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PastClosedWithinTAT)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PastClosedTATMissed)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PastOpenOnHold)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PastOpenWIP)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PastOpenUnActioned)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TodayClosedWithinTAT)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TodayOpenOnHold)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TodayOpenWIP)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TodayOpenUnActioned)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FutureClosedBeforeTAT)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FutureOpenOnHold)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FutureOpenWIP)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FutureOpenUnActioned)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PastTotal)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TodayTotal)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FutureTotal)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Total)
            </th>
            </thead>
            <tbody>
                @foreach (var item in Model)
            {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.LocationId)
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'PastClosedWithinTAT')">@item.PastClosedWithinTAT</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'PastClosedTATMissed')">@item.PastClosedTATMissed</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'PastOpenOnHold')">@item.PastOpenOnHold</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'PastOpenWIP')">@item.PastOpenWIP</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'PastOpenUnActioned')">@item.PastOpenUnActioned</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'TodayClosedWithinTAT')">@item.TodayClosedWithinTAT</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'TodayOpenOnHold')">@item.TodayOpenOnHold</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'TodayOpenWIP')">@item.TodayOpenWIP</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'TodayOpenUnActioned')">@item.TodayOpenUnActioned</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'FutureClosedBeforeTAT')">@item.FutureClosedBeforeTAT</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'FutureOpenOnHold')">@item.FutureOpenOnHold</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'FutureOpenWIP')">@item.FutureOpenWIP</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'FutureOpenUnActioned')">@item.FutureOpenUnActioned</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'PastTotal')">@item.PastTotal</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'TodayTotal')">@item.TodayTotal</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'FutureTotal')">@item.FutureTotal</a>
                        </td>
                        <td>
                            <a href="javascript:PastClosedWithinTAT(@item.LocationId,'Total')">@item.Total</a>
                        </td>

                    </tr>
                }
            </tbody>
        </table>
       
        </form>
  
</div>

<script>
    $(document).ready(function () {
        $('.table').DataTable();
    });

    function PastClosedWithinTAT(id, name) {
         $(function () {
        $('#dialog').dialog({
            autoOpen: false,
            width: 400,
            resizable: false,
            title: 'hi there',
            modal: true,
            open: function(event, ui) {
                //Load the CreateAlbumPartial action which will return
                // the partial view _CreateAlbumPartial
                $(this).load("@Url.Action("popupDetail","TaskSummery")")
            },
            buttons: {
                "Close": function () {
                    $(this).dialog("close");
                }
            }
        });

        $('#my-button').click(function () {
            $('#dialog').dialog('open');
        });
    });
    }
</script>

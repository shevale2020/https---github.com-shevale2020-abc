<html style="" class="js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths active open"><head>


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

    
    <title>eCLOSE</title>
    <!-- Styles -->
    <link href="/assets/fonts/opensans/open-sans.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/pace-master/themes/blue/pace-theme-flash.css" rel="stylesheet">
    <link href="/assets/plugins/uniform/css/uniform.default.min.css" rel="stylesheet">
    <link href="/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/fontawesome/css/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/line-icons/simple-line-icons.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/offcanvasmenueffects/css/menu_cornerbox.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/waves/waves.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/switchery/switchery.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/3d-bold-navigation/css/style.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/slidepushmenus/css/component.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/metrojs/MetroJs.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/toastr/toastr.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/jquery-ui/jquery-ui.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/sweetalert/lib/sweetalert.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/select2/css/select2-bootstrap.css" rel="stylesheet" type="text/css">




    <!-- Theme Styles -->
    <link href="/assets/css/modern.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/themes/white.css" class="theme-color" rel="stylesheet" type="text/css">
    <link href="/assets/css/custom.css" rel="stylesheet" type="text/css">

    <!--Datattable-->
    <link href="/Content/jquery.dataTables.min.css" rel="stylesheet" type="text/css">

    <!-- Javascripts -->
    <script src="/assets/plugins/jquery/jquery-2.1.4.min.js"></script>
    <script src="/assets/plugins/3d-bold-navigation/js/modernizr.js"></script>
    <script src="/assets/plugins/offcanvasmenueffects/js/snap.svg-min.js"></script>

    <style>
        textarea {
            resize: none;
        }
    </style>
</head>
<body class="page-header-fixed page-sidebar-fixed   active open" onload="StartTimers();" onmousedown="ResetTimers();" style="">


    <main class="page-content content-wrap active open">

        <div class="navbar">

                <div class="navbar-inner">
                    <div class="sidebar-pusher">
                        <a href="javascript:void(0);" class="waves-effect waves-button waves-classic push-sidebar">
                            <i class="fa fa-bars"></i>
                        </a>
                    </div>
                    <div class="logo-box">
                        <a href="#" class="logo-text">  <img src="/assets/images/eclose-logo.png" width="100" alt="eClose"></a>
                    </div>
                    <!-- Logo Box -->
                    <div class="search-button">
                        <a href="javascript:void(0);" class="waves-effect waves-button waves-classic show-search"><i class="fa fa-search"></i></a>
                    </div>
                    <div class="topmenu-outer">
                        <div class="top-menu">
                            <ul class="nav navbar-nav navbar-left">

                                <li>
                                    <a href="javascript:void(0);" class="waves-effect waves-button waves-classic sidebar-toggle  "><i class="fa fa-bars"></i></a>

                                </li>
                                <li>

                                    <h3> Delaware North-Demo [Demo]</h3>

                                </li>


                                



                                

                            </ul>
                            <ul class="nav navbar-nav navbar-right">
                                

                                
                                
                                <li class="user-name-top" id="useDetails" role="button">
                                    <img class="img-circle avatar no-s pull-left" src="/assets/images/user-profile.jpg" width="40" height="40" alt="">
                                    <p class="pull-right p-h-sm">
WIND\u289157                                        - Noah Powell

                                        <small class="text-primary">TenantAdmin</small>
                                    </p>
                                </li>

                                <li>
                                    <a href="javascript:void(0);" class="waves-effect waves-button waves-classic toggle-fullscreen"><i class="fa fa-expand"></i></a>
                                </li>
                                <li>
                                    <a class="fa fa-sign-out" href="/Login/LogOut" title="Log-Out"> </a>

                                </li>

                            </ul>
                            <!-- Nav -->
                        </div>
                        <!-- Top Menu -->


                    </div>
                </div>
        </div>
        <!-- Navbar -->
        <!-- Modal -->
        <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog" id="modalDialog" style="left:0%">
                <!-- Modal content-->
                <div class="modal-content" id="modalContent">
                    <div class="modal-header" id="modalHead" style="padding:2px">
                        <button type="button" id="close" class="close" data-dismiss="modal" style="padding:inherit">×</button>
                    </div>
                    <div class="modal-body" id="modal-body" style="padding:10px">
                    </div>
                    <div class="modal-footer" id="modalFooter">
                        
                        <button type="button" class="btn btn-default" data-dismiss="modal" id="btnClose" style="border-radius: 0!important;background-color:#34425A;color:white">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="page-sidebar sidebar active open">
            <div class="slimScrollDiv active open" style="position: relative; overflow: hidden; width: auto; height: 100%;"><div class="page-sidebar-inner slimscroll active open" id="divMenu" style="overflow: hidden; width: auto; height: 100%;">

                



<!-- sidebar menu: : style can be found in sidebar.less -->
<ul class="menu accordion-menu active open">
 
    <li>
        <a href="/DashboardData" class="waves-effect waves-button">
            <span class="menu-icon glyphicon glyphicon-dashboard"></span>
            <p>Dashboard</p>
        </a>

    </li>
    

    

    <li class="droplink">
        <a href="#" class="waves-effect waves-button"><span class="menu-icon glyphicon glyphicon-tasks"></span><p>Period</p><span class="menu-arrow"></span></a>
        <ul class="sub-menu " style="display: none;">
            <li><a href="/Period">Workdays</a></li>
            <li><a href="/Rollover">Rollover</a></li>
            <li><a href="/Periods">Closure</a></li>
        
        </ul>
    </li>


     

    

    <li class="droplink">
        <a href="#" class="waves-effect waves-button"><span class="menu-icon glyphicon glyphicon-tasks"></span><p>Tasks</p><span class="menu-arrow"></span></a>
        <ul class="sub-menu " style="display: none;">
            <li><a href="/Tasks">Adhoc</a></li>
            <li><a href="/TaskTemplate">Regular</a></li>
            <li><a href="/Discard">Discard</a></li>
            <li><a href="/Reallocation">Reallocation</a></li>
        </ul>
    </li>

    <li class="droplink   active open">
        <a href="#" class="waves-effect waves-button">
            <span class="menu-icon glyphicon glyphicon-stats"></span>
            <p>Reports</p><span class="menu-arrow"></span>
        </a>
        <ul class="sub-menu  active open" style="display:block;">
            <li><a href="/Summary">Summary </a></li>
            <li><a href="/Report?report=DueDay">Due Day</a></li>
            <li><a href="/Report?report=Hold">Hold</a></li>
            <li><a href="/Report?report=Reject">Reject</a></li>
            <li>
                <a href="/Report?report=Status">Status</a>
            </li>
            <li><a href="/Report?report=Exception">Exception</a></li>
            <li class="active open"><a href="/DependencyGraph">Dependency Graph</a></li>
           
        </ul>
    </li>
   
 
    <li class="droplink  ">
        <a href="#" class="waves-effect waves-button">
            <span class="menu-icon glyphicon glyphicon-cog"></span>
            <p>Masters</p><span class="menu-arrow"></span>
        </a>
        <ul class="sub-menu " style="display: none;">
            <li> <a href="/UserRole">User</a></li>
            <li><a href="/Team">Team/Ledger</a></li>
            
            <li><a href="/Location">Location/BU</a></li>
            <li><a href="/ReasonsLookUp">Reason Codes</a></li>
        </ul>
    </li>

    


     
</ul>




            </div><div class="slimScrollBar" style="background: rgb(204, 204, 204); width: 7px; position: absolute; top: 0px; opacity: 0.3; display: none; border-radius: 0px; z-index: 99; right: 0px; height: 562px;"></div><div class="slimScrollRail" style="width: 7px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 0px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 0px;"></div></div>
            <!-- Page Sidebar Inner -->
        </div>
        <!-- Page Sidebar -->
        <div class="page-inner" style="min-height:255px !important">

            <div class="page-title">
                <div class="pull-left">
                    
                    <div class="page-breadcrumb">
                        <ol class="breadcrumb">
                            <li class="active">
                                Home
                            </li>
                            <li class="active"><span id="moduleName">Reports / Dependency Graph</span></li>
                        </ol>
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>

            <div id="main-wrapper">
                <div class="content-wrapper" id="MainDiv">
                    <!-- Main content -->
                    <section class="content" id="main">

                            <div id="divDashboard"></div>
                            <div id="divFilter" class="m-b-xs" style="display: none;">
                                <div class="panel no-s">

                                    <div class="panel-body no-s">
                                        <div id="divRenderFilter"></div>
                                        <label id="lblEntity"></label>

                                        <input type="text" name="name" class="form-control" id="inputEntity">

                                    </div>
                                    <div class="panel-footer">

                                        <div class="input-group">
                                            <div class="input-group-btn">
                                                <button type="submit" id="LoadRecords" class="btn btn-primary">
                                                    Load records
                                                </button>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>

                        <div id="divEntity">
                        </div>
                        

<style>
    path {
        fill: none;
        stroke: black;
    }

    body {
        background: #fff;
    }
</style>

<style>
    table {
        font-family: arial, sans-serif;
        font-size: small;
        border-collapse: collapse;
        width: 100%;
    }

    td, th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    tr:nth-child(even) {
        background-color: #dddddd;
    }

    .table > tbody > tr > td, .table > tbody > tr > th, .table > tfoot > tr > td, .table > tfoot > tr > th, .table > thead > tr > td, .table > thead > tr > th, .table td {
        padding: 3px !important;
    }
    
         .loader {
    position: fixed;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    z-index: 9999;
    background: url('images/pageLoader.gif') 50% 50% no-repeat rgb(249,249,249);
    opacity: .8;
    }
</style>



    <div class="panel panel-white" id="divDiscard">
        <div class="panel-body row">
            <br>
            <br>
            <div class="col-md-3">
                <div class="form-group no-m">
                    <label>
                        Location/BU :
                    </label>
                    <select class="form-control select2-hidden-accessible" id="Location" name="Location" placeholder="Select Location" tabindex="-1" aria-hidden="true"><option value="0">--Select--</option>
<option value="203">Australia/ New Zealand [AUS Central Standard Time]</option>
<option value="204">North America [Eastern Standard Time]</option>
<option value="211">testTeam [India Standard Time]</option>
<option value="205">United Kingdom [Greenwich Standard Time]</option>
</select><span class="select2 select2-container select2-container--default select2-container--below" dir="ltr" style="width: 273px;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-Location-container"><span class="select2-selection__rendered" id="select2-Location-container" title="Australia/ New Zealand [AUS Central Standard Time]">Australia/ New Zealand [AUS Central Standard Time]</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group  no-m">
                    <label>
                        Period :
                    </label>
                    <select class="form-control select2-hidden-accessible" id="Period" name="Period" placeholder="Select Period" tabindex="-1" aria-hidden="true"><option value="0">--Select--</option><option value="119">New Period for Test2</option><option value="120">dfgdfg</option><option value="125">1stWeekPeriod</option><option value="127">3rdweekPeriod</option><option value="128">4thWeekPeriod</option><option value="129">TestNegaDys</option><option value="132">Oct-2018</option><option value="133">October-2018</option><option value="134">Nov-2018</option></select><span class="select2 select2-container select2-container--default select2-container--below" dir="ltr" style="width: 288px;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-Period-container"><span class="select2-selection__rendered" id="select2-Period-container" title="New Period for Test2">New Period for Test2</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                </div>
            </div>
        </div>
        <div class="panel-footer">
            <div class="col-md-6">
                <label class="radio-inline"><div class="radio" id="uniform-TaskType"><span class=""><input type="radio" value="2" id="TaskType" name="TaskType" checked="checked"></span></div>All Task</label>
                <label class="radio-inline"><div class="radio" id="uniform-TaskType"><span class=""><input type="radio" value="0" id="TaskType" name="TaskType"></span></div>Dependent Task</label>
                <label class="radio-inline"><div class="radio" id="uniform-TaskType"><span class="checked"><input type="radio" value="1" id="TaskType" name="TaskType"></span></div>Independent Task</label>
            </div>
            <button type="button" id="btnReport" class="btn btn-primary" onclick="updateDate()">Generate Graph</button>
            
            <button type="button" class="btn btn-primary" id="save_as_svg" onclick="submit_download_form()" value="">
                Save as SVG
            </button>
            
   
            <form id="svgform" method="post" action="Report/ExportChart">
                <httpruntime requestvalidationmode="2.0">
                <input name="__RequestVerificationToken" type="hidden" value="KtDyI3F7E5U-08PFn0HULZ2yvRK5efTAtSWtXZdBTCeJf0hI4kqDL3OttB0gZPDO2kqxihjHEbiWL6j4SmlDXnH9zadd-cCBuVO8AOS1IKom7rgxUTkxHHw6DO1tpKeQ0">
                <input type="hidden" id="output_format" name="output_format" value="">
                <input type="hidden" id="data" name="data" value="">
            
        
        </httpruntime></form></div>
        <div class="panel">

        </div>
        <div role="tabpanel" class="col-md-12">
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active">
                    <a href="#graph" aria-controls="graph" role="tab" data-toggle="tab" aria-expanded="true">Graph</a>
                </li>
                <li role="presentation" class="">
                    <a href="#taskDetails" aria-controls="taskDetails" role="tab" data-toggle="tab" aria-expanded="false">Task Details </a>
                </li>
            </ul>
            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="graph">
                    <div class="panel-body no-s">
                        <div class="panel-body row" id="divTable" style="width:auto">

                            <div id="wrapper" class="col-lg-12" align="center">
                            <div class="tooltip" style="opacity: 0;"></div><div class="tooltip" style="opacity: 0;"></div><div class="tooltip" style="opacity: 0;"></div><div class="tooltip" style="opacity: 0;"></div><svg width="1100" height="950"><g transform="translate(-1.1368683772161603e-13,-2.2737367544323206e-13) scale(1.0000000000000002)"><rect width="100%" height="100%" fill="#F7F7F7"></rect><g class="x axis" transform="translate(0,900)"><g class="tick" transform="translate(44.625,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jun 25</text></g><g class="tick" transform="translate(133.875,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jun 27</text></g><g class="tick" transform="translate(223.125,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jun 29</text></g><g class="tick" transform="translate(312.375,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">July</text></g><g class="tick" transform="translate(401.625,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jul 03</text></g><g class="tick" transform="translate(490.875,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jul 05</text></g><g class="tick" transform="translate(580.125,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jul 07</text></g><g class="tick" transform="translate(669.375,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jul 09</text></g><g class="tick" transform="translate(758.625,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jul 11</text></g><g class="tick" transform="translate(847.875,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jul 13</text></g><g class="tick" transform="translate(937.125,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jul 15</text></g><g class="tick" transform="translate(1026.375,0)" style="opacity: 1;"><line y2="6" x2="0"></line><text dy=".71em" y="9" x="0" style="text-anchor: middle;">Jul 17</text></g><path class="domain" d="M0,6V0H1071V6"></path><text class="label" x="1071" y="-6" style="font-size: 10px; text-anchor: end;">Task End Date</text></g><g class="y axis"><path class="domain" d="M-6,0H0V900H-6"></path><text class="label" transform="rotate(-90)" y="6" dy=".71em" style="text-anchor: end;"></text></g><circle class="dot" r="5" cx="178.5" cy="887.3239436619718" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="New Task 27 june_2" data-value="1" data-date="2018-06-28" data-sqft="0">(3368) New Task 27 june_2(2018-06-28) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="178.5" cy="874.6478873239437" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="new1 regular task 26-9-2018" data-value="2" data-date="2018-06-28" data-sqft="0">(3373) new1 regular task 26-9-2018(2018-06-28) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="357" cy="861.9718309859155" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="Test_June26" data-value="3" data-date="2018-07-02" data-sqft="0">(3333) Test_June26(2018-07-02) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="357" cy="849.2957746478872" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="new task for test 16_10_18" data-value="4" data-date="2018-07-02" data-sqft="0">(3374) new task for test 16_10_18(2018-07-02) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="401.625" cy="836.6197183098592" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="test1" data-value="5" data-date="2018-07-03" data-sqft="0">(3338) test1(2018-07-03) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="401.625" cy="823.943661971831" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="new23_10_2018" data-value="6" data-date="2018-07-03" data-sqft="0">(3376) new23_10_2018(2018-07-03) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="446.25" cy="811.2676056338029" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="EmailTestTask" data-value="7" data-date="2018-07-04" data-sqft="0">(3372) EmailTestTask(2018-07-04) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="490.875" cy="798.5915492957747" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="test" data-value="8" data-date="2018-07-05" data-sqft="0">(3337) test(2018-07-05) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="490.875" cy="785.9154929577464" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="1new23_10_2018" data-value="9" data-date="2018-07-05" data-sqft="0">(3377) 1new23_10_2018(2018-07-05) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="535.5" cy="773.2394366197183" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="New Task 27 june" data-value="10" data-date="2018-07-06" data-sqft="0">(3371) New Task 27 june(2018-07-06) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="669.375" cy="760.5633802816901" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="futuretasktest" data-value="11" data-date="2018-07-09" data-sqft="0">(3375) futuretasktest(2018-07-09) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="747.887323943662" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="Sanity Test 1" data-value="12" data-date="2018-07-17" data-sqft="0">(3334) Sanity Test 1(2018-07-17) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="735.2112676056338" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="Sanity Test 2" data-value="13" data-date="2018-07-17" data-sqft="0">(3335) Sanity Test 2(2018-07-17) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="722.5352112676056" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="Generate and review AP Aging for non-standard terms" data-value="14" data-date="2018-07-17" data-sqft="0">(3370) Generate and review AP Aging for non-standard terms(2018-07-17) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="709.8591549295775" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="Post all non-po invoices by EOD" data-value="15" data-date="2018-07-17" data-sqft="0">(3387) Post all non-po invoices by EOD(2018-07-17) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="697.1830985915493" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="Request Statement of Accounts (SOAs) from all applicable vendors" data-value="16" data-date="2018-07-17" data-sqft="0">(3388) Request Statement of Accounts (SOAs) from all applicable vendors(2018-07-17) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="684.5070422535211" style="fill: rgb(31, 119, 180); cursor: pointer;"><title data-title="Review AP aging for any unapplied credits. Material debits s/b reclassed to AR-Manual" data-value="17" data-date="2018-07-17" data-sqft="0">(3389) Review AP aging for any unapplied credits. Material debits s/b reclassed to AR-Manual(2018-07-17) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="671.830985915493" style="fill: rgb(255, 127, 14); cursor: pointer;"><title data-title="Coordinate meeting with SW Engineering Team Leads to obtain a percentage of completion estimate w---" data-value="18" data-date="2018-07-17" data-sqft="1">(3339) Coordinate meeting with SW Engineering Team Leads to obtain a percentage of completion estimate w---(2018-07-17) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="659.1549295774648" style="fill: rgb(255, 127, 14); cursor: pointer;"><title data-title="Determine whether cost implications should be expensed or capitalized to the balance sheet based ---" data-value="19" data-date="2018-07-17" data-sqft="1">(3340) Determine whether cost implications should be expensed or capitalized to the balance sheet based ---(2018-07-17) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="646.4788732394366" style="fill: rgb(255, 127, 14); cursor: pointer;"><title data-title="Record a separate journal entry to reclass capitalized costs" data-value="20" data-date="2018-07-17" data-sqft="1">(3341) Record a separate journal entry to reclass capitalized costs(2018-07-17) DependentTaskID:-</title></circle><circle class="dot" r="5" cx="1026.375" cy="633.8028169014084" style="fill: rgb(255, 127, 14); cursor: pointer;"><title data-title="Verify whether engineering team is working on any new projects that may be susceptible to capital---" data-value="21" data-date="2018-07-17" data-sqft="1">(3342) Verify whether engineering team is working on any new projects that may be susceptible to capital---(2018-07-17) DependentTaskID:-</title></circle><text x="535.5" y="-7" text-anchor="middle" style="font-size: 12px; text-decoration-style: dotted; text-decoration-color: red;">Location - Australia/ New Zealand [AUS Central Standard Time],  Period - New Period for Test2,  Task type - Independent Task</text><text x="178.5" y="887.3239436619718" class="nodelubel" font-size="10px">3368</text><text x="178.5" y="874.6478873239437" class="nodelubel" font-size="10px">3373</text><text x="357" y="861.9718309859155" class="nodelubel" font-size="10px">3333</text><text x="357" y="849.2957746478872" class="nodelubel" font-size="10px">3374</text><text x="401.625" y="836.6197183098592" class="nodelubel" font-size="10px">3338</text><text x="401.625" y="823.943661971831" class="nodelubel" font-size="10px">3376</text><text x="446.25" y="811.2676056338029" class="nodelubel" font-size="10px">3372</text><text x="490.875" y="798.5915492957747" class="nodelubel" font-size="10px">3337</text><text x="490.875" y="785.9154929577464" class="nodelubel" font-size="10px">3377</text><text x="535.5" y="773.2394366197183" class="nodelubel" font-size="10px">3371</text><text x="669.375" y="760.5633802816901" class="nodelubel" font-size="10px">3375</text><text x="1026.375" y="747.887323943662" class="nodelubel" font-size="10px">3334</text><text x="1026.375" y="735.2112676056338" class="nodelubel" font-size="10px">3335</text><text x="1026.375" y="722.5352112676056" class="nodelubel" font-size="10px">3370</text><text x="1026.375" y="709.8591549295775" class="nodelubel" font-size="10px">3387</text><text x="1026.375" y="697.1830985915493" class="nodelubel" font-size="10px">3388</text><text x="1026.375" y="684.5070422535211" class="nodelubel" font-size="10px">3389</text><text x="1026.375" y="671.830985915493" class="nodelubel" font-size="10px">3339</text><text x="1026.375" y="659.1549295774648" class="nodelubel" font-size="10px">3340</text><text x="1026.375" y="646.4788732394366" class="nodelubel" font-size="10px">3341</text><text x="1026.375" y="633.8028169014084" class="nodelubel" font-size="10px">3342</text><g class="legends4" transform="translate(0,0)"><rect x="10" y="5" width="55" height="5" style="fill: rgb(44, 160, 44);"></rect><text x="65" y="10" class="textselected" style="text-anchor: start; font-size: 10px;">Correct Dependancy</text></g><g class="legends4" transform="translate(168,0)"><rect x="10" y="5" width="55" height="5" style="fill: rgb(214, 39, 40);"></rect><text x="65" y="10" class="textselected" style="text-anchor: start; font-size: 10px;">Wrong Dependancy</text></g><g class="legend" transform="translate(0,0)"><rect x="1053" width="18" height="18" style="fill: rgb(31, 119, 180);"></rect><text x="1047" y="9" dy=".35em" style="text-anchor: end;">Accounts Payable</text></g><g class="legend" transform="translate(0,20)"><rect x="1053" width="18" height="18" style="fill: rgb(255, 127, 14);"></rect><text x="1047" y="9" dy=".35em" style="text-anchor: end;">Capitalized Software</text></g></g></svg><div class="tooltip" style="opacity: 0;"></div></div>

                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="taskDetails">

                    
                    <div class="panel-body no-s">
                        <div class="panel-body row" id="divTable" style="width:auto">
                            <div id="tblTaskRecord_wrapper" class="dataTables_wrapper no-footer"><div id="tblTaskRecord_filter" class="dataTables_filter"><label>Search:<input type="search" class="" placeholder="" aria-controls="tblTaskRecord"></label></div><table id="tblTaskRecord" class="table table-striped table-bordered dt-responsive nowrap no-footer dataTable" style="width: 100%;" role="grid" aria-describedby="tblTaskRecord_info">
                                <thead style="background-color:#6dd2cd;">
                                    <tr role="row"><th class="sorting_asc" tabindex="0" aria-controls="tblTaskRecord" rowspan="1" colspan="1" aria-label="TaskId: activate to sort column descending" style="width: 0px;" aria-sort="ascending">TaskId</th><th class="sorting" tabindex="0" aria-controls="tblTaskRecord" rowspan="1" colspan="1" aria-label="TaskName: activate to sort column ascending" style="width: 0px;">TaskName</th><th class="sorting" tabindex="0" aria-controls="tblTaskRecord" rowspan="1" colspan="1" aria-label="Due By: activate to sort column ascending" style="width: 0px;">Due By</th><th class="sorting" tabindex="0" aria-controls="tblTaskRecord" rowspan="1" colspan="1" aria-label="Dependent TaskId: activate to sort column ascending" style="width: 0px;">Dependent TaskId</th><th class="sorting" tabindex="0" aria-controls="tblTaskRecord" rowspan="1" colspan="1" aria-label="Dependent Task Due By: activate to sort column ascending" style="width: 0px;">Dependent Task Due By</th><th class="sorting" tabindex="0" aria-controls="tblTaskRecord" rowspan="1" colspan="1" aria-label="Dependent TaskName: activate to sort column ascending" style="width: 0px;">Dependent TaskName</th></tr>
                                </thead>
                                <tbody><tr role="row" class="odd"><td class="sorting_1">3333</td><td>Test_June26</td><td>2018-07-02</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3334</td><td>Sanity Test 1</td><td>2018-07-17</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3335</td><td>Sanity Test 2</td><td>2018-07-17</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3337</td><td>test</td><td>2018-07-05</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3338</td><td>test1</td><td>2018-07-03</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3339</td><td>Coordinate meeting with SW Engineering Team Leads to obtain a percentage of completion estimate w---</td><td>2018-07-17</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3340</td><td>Determine whether cost implications should be expensed or capitalized to the balance sheet based ---</td><td>2018-07-17</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3341</td><td>Record a separate journal entry to reclass capitalized costs</td><td>2018-07-17</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3342</td><td>Verify whether engineering team is working on any new projects that may be susceptible to capital---</td><td>2018-07-17</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3368</td><td>New Task 27 june_2</td><td>2018-06-28</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3370</td><td>Generate and review AP Aging for non-standard terms</td><td>2018-07-17</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3371</td><td>New Task 27 june</td><td>2018-07-06</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3372</td><td>EmailTestTask</td><td>2018-07-04</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3373</td><td>new1 regular task 26-9-2018</td><td>2018-06-28</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3374</td><td>new task for test 16_10_18</td><td>2018-07-02</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3375</td><td>futuretasktest</td><td>2018-07-09</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3376</td><td>new23_10_2018</td><td>2018-07-03</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3377</td><td>1new23_10_2018</td><td>2018-07-05</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3387</td><td>Post all non-po invoices by EOD</td><td>2018-07-17</td><td></td><td></td><td></td></tr><tr role="row" class="even"><td class="sorting_1">3388</td><td>Request Statement of Accounts (SOAs) from all applicable vendors</td><td>2018-07-17</td><td></td><td></td><td></td></tr><tr role="row" class="odd"><td class="sorting_1">3389</td><td>Review AP aging for any unapplied credits. Material debits s/b reclassed to AR-Manual</td><td>2018-07-17</td><td></td><td></td><td></td></tr></tbody>
                            </table><div class="dataTables_info" id="tblTaskRecord_info" role="status" aria-live="polite">Showing 1 to 21 of 21 entries</div></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="loader" style="display: none;"></div>
    </div>
    <div class="row">
        <div id="myModal2" style="overflow: scroll; resize:both;" class="modal fade" aria-hidden="true">
            <div class="modal-dialog modal-lg fixed-height">
                <div class="modal-content" style="height:550px;width:1000px; overflow: scroll; resize:both;">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">
                        <div id="myModalContent2">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" aria-label="Close">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script src="/Scripts/jspdf.min.js"></script>
<script src="/Scripts/canvas-toBlob.js"></script>

<script src="/Scripts/FileSaver.min.js"></script>
<script src="/Scripts/d3.v3.min.js"></script>
<script src="/Scripts/jquery-1.12.4.js"></script>

<script src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>


<script src="/Scripts/prettify.js"></script>
<script src="/Scripts/vkbeautify.0.99.00.beta.js"></script>

<script>
  
    (function () {
        var
            form = $('#divDiscard');
        cache_width = form.width(),
                a2 = [850, 1200]; // for a4 size paper width and height

        $('#create_pdf').on('click', function () {
            $('body').scrollTop(0);
            createPDF();
        });
        //create pdf
        function createPDF() {
            getCanvas().then(function (canvas) {
                var
                    img = canvas.toDataURL("image/png"),
                        pdf = new jsPDF('p', 'pt', 'A4');
                var options = {
                    pagesplit: true
                };
                var newImageData = contrastImage(img, 198);

                function contrastImage(img, contrast) {

                    var data = img;
                    var factor = (259 * (contrast + 255)) / (255 * (259 - contrast));

                    for (var i = 0; i < data.length; i += 4) {
                        data[i] = factor * (data[i] - 128) + 128;
                        data[i + 1] = factor * (data[i + 1] - 128) + 128;
                        data[i + 2] = factor * (data[i + 2] - 128) + 128;
                    }
                    return img;
                }

                var width = pdf.internal.pageSize.width;
                var height = pdf.internal.pageSize.height;
                pdf.addImage(canvas, 'JPEG', 5, 0, width, height, newImageData);
                pdf.save('test11.pdf');

                form.width(cache_width);
            });
        }

        // create canvas object
        function getCanvas() {
            form.width((a2[0] * 1.33333) - 80).css('max-width', 'none');
            return html2canvas(form, {
                margin: 1,
                filename: 'myfile.pdf',
                image: { type: 'jpeg', quality: 1 },
                html2canvas: { scale: 2, logging: true },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'l' }
            });
        }

    }());
</script>

<script type="text/javascript">
    $('#divFilter').hide();
    $("#moduleName").text('Reports / Dependency Graph');
    $('#Location').change(function () {
        var locationId = $(this).val();
        $.ajax({
            url: '/Location/GetPeriodNTeamByLocationId',
            data: { locationId: locationId },
            type: "Get",
            contentType: "application/json",
            success: function (data) {
                $("#Period").empty();
                $.each(data.Records.Period, function (index, value) {
                    $("#Period").append("<option value='" + value.Value + "'>" + value.Text + "</option>");
                });
            }
        });
    });
</script>



<script type="text/javascript">
    var svg = "";

    function updateDate() {


        var colorData = [];
        //here add a filter

        if ($('#Location').val() != "0" && $('#Period').val() != "0") {
            var Period = $('#Period').val();
            var locationId = $('#Location').val();

            var chart = d3.select("#wrapper");
            chart.selectAll("svg").remove();
            showPleaseWait();
            d3.json('Report/Graphdata?LocationId=' + locationId + '&PeriodId=' + Period + '&TaskType=' + $("input[name='TaskType']:checked").val(), function (data) {
                console.log(data);
                hidePleaseWait();

                if (data != null || data.empty == true) {
                    console.log(data);
                    var Data = JSON.parse(data);

                    console.log(Data);
                    if (Data.length == 0) {
                        Command: toastr["error"]("Record Not Present related Location and Period ");

                        var tbl = $('#tblTaskRecord');
                        tbl.empty;
                        tbl.addClass("hidden");
                        return false;
                    }
                    else {
                        //lagend TeamNames
                        var TeamNames = [];
                        var TaskEndDates = [];
                        var EndDates = [];
                        var StartDates = [];
                        var rows = ""
                        var editData = [];
                        $.each(Data, function (index, value) {
                            if ((value.TaskTitle == value.DependantTaskName && value.TaskId == value.DependsOnWorkbasketTaskId) || TaskType == true) {
                                value.DependantTaskName = "";
                                value.DependsOnWorkbasketTaskId = "";
                                value.DependantTaskDate = "";
                            }

                            if (value.DependsOnWorkbasketTaskId != "") {
                                if (value.DependsOnWorkbasketTaskId == null) {
                                    value.DependantTaskName = "";
                                    value.DependsOnWorkbasketTaskId = "";
                                    value.DependantTaskDate = "";
                                }
                                if ($("input[name='TaskType']:checked").val() == "0") {
                                    if (value.DependsOnWorkbasketTaskId != "") {
                                        editData.push(Data[index]);
                                    }
                                }
                                else {
                                    editData.push(Data[index]);
                                }

                                if ($.inArray(value.TeamName, TeamNames) == -1) {
                                    TeamNames.push(value.TeamName);
                                }

                                if ($.inArray(value.TaskDate, TaskEndDates) == -1) {
                                    TaskEndDates.push(value.TaskDate);
                                }
                                if ($.inArray(value.EndDate, EndDates) == -1) {
                                    EndDates.push(value.EndDate);
                                }

                                if ($.inArray(value.StartDate, StartDates) == -1) {
                                    StartDates.push(value.StartDate);
                                }
                            }
                        });

                        console.log('editdata' + editData);
                        var table = $('#tblTaskRecord');
                        table.empty;
                        $(function () {
                            table.removeClass("hidden");
                            var GridTable = table.dataTable({
                                destroy: true,
                                searching: true,
                                paging: false,
                                filter: true, // this is for disable filter (search box)
                                orderMulti: true, // for disable multiple column at once
                                pageLength: 1000,
                                bJQueryUI: true,
                                aaData: editData,
                                aoColumns: [
                                        { mData: 'TaskId', autoWidth: true },
                                        { mData: 'TaskTitle', autoWidth: true },
                                        { mData: 'TaskDate', autoWidth: true },
                                        { mData: 'DependsOnWorkbasketTaskId', autoWidth: true },
                                        { mData: 'DependantTaskDate', autoWidth: true },
                                        { mData: 'DependantTaskName', autoWidth: true }
                                ]
                            });
                        });

                        var margin = {
                            top: 20,
                            right: 20,
                            bottom: 30,
                            left: 9
                        };
                        width = 1100 - margin.left - margin.right,
                           height = 950 - margin.top - margin.bottom;
                        // var sorted = TaskEndDates.sort();
                        var sortedmin = StartDates.sort();
                        var sortedmax = EndDates.sort();
                        var minDate = sortedmin[0];
                        var maxDate = sortedmax[0];
                        var format = d3.time.format("%Y-%m-%d");
                        //minDate = minDate.split('T')[0];
                        //maxDate = maxDate.split('T')[0];

                        console.log(minDate);
                        console.log(maxDate);

                        // x axis scal min and maximum Data ...if you to do this dynamaic send the Data for json assign here

                        var dateMin = new Date();
                        var dateMax = new Date();
                        dateMax = format.parse(maxDate);
                        dateMin = format.parse(minDate);
                       
                       


                        dateMin.setDate(dateMin.getDate() - 1);
                        var newMinDate = dateMin.toDateString();
                        newMinDate = new Date(Date.parse(newMinDate));


                        dateMax.setDate(dateMax.getDate() + 1);
                        var newMaxDate = dateMax.toDateString();
                        newMaxDate = new Date(Date.parse(newMaxDate));


                        ///
                        var xValue = function (d) {
                            return format.parse(d.TaskDate);
                        }, // Data -> value

                            xScale = d3.time.scale().domain([dateMin, dateMax]).range([0, width], 3.5), // value -> display
                            xMap = function (d) {

                                return xScale(xValue(d));
                            }, // Data -> display
                            xAxis = d3.svg.axis().scale(xScale).orient("bottom");
                        var yValue = function (d) {
                            return d.TaskNumber;
                        }, // Data -> value
                            yScale = d3.scale.linear().range([height, 0]), // value -> display
                            yMap = function (d) {
                                return yScale(yValue(d));
                            }, // Data -> display
                            yAxis = d3.svg.axis().scale(yScale).orient("left");
                        // setup fill color
                        var cValue = function (d) {
                            return d.ownership;
                        },
                            color = d3.scale.category10();

                        // add the graph canvas to the body of the webpage
                        //var svg = d3.select("#wrapper").append("svg")
                        //    .attr("width", width + margin.left + margin.right)
                        //    .attr("height", height + margin.top + margin.bottom)
                        //     .call(d3.behavior.zoom().on("zoom", function () {
                        //         svg.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")")
                        //     }))
                        //    .append("g")
                        //    .attr("id", "visualization")
                        //    .attr("xmlns", "http://www.w3.org/2000/svg")
                        //    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                        var svg = d3.select("#wrapper").append("svg")
                                    .attr("width", width + margin.left + margin.right)
                                    .attr("height", height + margin.top + margin.bottom)
                                    //.call(responsivefy) 
                                     .call(d3.behavior.zoom().on("zoom", function () {
                                         svg.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")")
                                     }))
                                    .append("g")
                                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                        svg.append("rect")
                           .attr("width", "100%")
                           .attr("height", "100%")
                           .attr("fill", "#F7F7F7");

                        // add the tooltip area to the webpage
                        var tooltip = d3.select("#wrapper").append("div")
                            .attr("class", "tooltip")
                            .style("opacity", 0);

                        // don't want dots overlapping axis, so add in buffer to Data domain

                        xScale.domain([dateMin, dateMax]);
                        yScale.domain([d3.min(Data, yValue) - 1, d3.max(Data, yValue) + 50]);

                        //x-axis name
                        svg.append("g")
                            .attr("class", "x axis")
                            .attr("transform", "translate(0," + height + ")")
                            .call(xAxis)
                            .append("text")
                            .attr("class", "label")
                            .style("font-size", "10px")
                            .attr("x", width)
                            .attr("y", -6)
                            .style("text-anchor", "end")
                            .text("Task End Date");

                        // y-axis name
                        svg.append("g")
                            .attr("class", "y axis")
                            .call(yAxis)
                            .append("text")
                            .attr("class", "label")
                            .attr("transform", "rotate(-90)")
                            .attr("y", 6)
                            .attr("dy", ".71em")
                            .style("text-anchor", "end");
                        //.text();
                        //var path = svg.append("path")
                        // .attr("d", line(data))
                        // .attr("stroke", "steelblue")
                        // .attr("stroke-width", "1")
                        // .attr("fill", "none");
                        // draw dots

                        svg.selectAll(".dot")
                            .data(Data)
                            .enter().append("circle")
                            .attr("class", "dot")
                            .attr("r",5)
                            .attr("cx", xMap)
                            .attr("cy", yMap)
                            .style("fill", function (d) {
                                return color(d.extra);
                            }).style("cursor", "pointer")
                            .append("title")
                            .text(function (d) {
                                var listOfvalueDependsOnWorkbasketTaskId = "";
                                if (d.DependsOnWorkbasketTaskId != "") {
                                    listOfvalueDependsOnWorkbasketTaskId = d.DependsOnWorkbasketTaskId + ", ";
                                }

                                $.each(Data, function (indexCheack, valueCheack) {
                                    if (d.TaskId == valueCheack.TaskId && d.DependsOnWorkbasketTaskId != valueCheack.DependsOnWorkbasketTaskId) {
                                        listOfvalueDependsOnWorkbasketTaskId = listOfvalueDependsOnWorkbasketTaskId + valueCheack.DependsOnWorkbasketTaskId + ", ";
                                    }
                                })

                                if (d.TaskId == d.DependsOnWorkbasketTaskId && d.TaskTitle == d.DependantTaskName) {
                                    d.DependsOnWorkbasketTaskId = "";
                                    d.DependantTaskName = "";
                                }
                                return ("(" + d.TaskId + ") " + d.TaskTitle + "(" + d.TaskDate + ") DependentTaskID:-" + listOfvalueDependsOnWorkbasketTaskId)
                            })
                           
                             .on("mouseout", function (d) {
                                 tooltip.transition()
                                     .duration(500)
                                     .style("opacity", 0)
                                     .style("cursor", "default");
                             })
                            .attr('data-title', function (e) {
                                return e.TaskTitle;
                            })
                            .attr('data-value', function (e) {
                                return e.TaskNumber;
                            })
                            .attr('data-date', function (e) {
                                return e.TaskDate;
                            })
                            .attr('data-sqft', function (e) {
                                return e.extra;
                            });

                        var location = document.getElementById("Location");
                        var locationValue = $("#Location option:selected").text();

                        var period = document.getElementById("Period");
                        var periodValue = $("#Period option:selected").text();

                        var taskType = document.getElementById("TaskType");
                        var taskTypeValue = $("input[name='TaskType']:checked").val();// $("#TaskType option:selected").text();
                        if (taskTypeValue == 2) {
                            taskType = "All Task";
                        }
                        else if (taskTypeValue == 0) {
                            taskType = "Dependent Task";
                        }
                        else {
                            taskType = "Independent Task";
                        }
                        console.log($("input[name='TaskType']:checked"));

                        var title = 'Location - ' + locationValue + ',  ' + 'Period - ' + periodValue + ',  ' + 'Task type - ' + taskType;
                        svg.append("text")
                            .attr("x", (width / 2))
                            .attr("y", 3 - (margin.top / 2))
                            .attr("text-anchor", "middle")
                            .style("font-size", "12px")
                            //.style("text-decoration", "underline")
                            .style("text-decoration-style", "dotted")
                            .style("text-decoration-color", "red")

                            .text(title);

                        //draw line
                 

                        for (var item in Data) {

                            var nodelabels = svg .append("text") .attr(
                            { 
                                "x": xScale((format.parse(Data[item]["TaskDate"]))),
                                "y": yScale((Data[item]["TaskNumber"])),
                                "class": "nodelubel",
                                //"stroke": "blue",
                                "font-size": "10px"
                            }) .text(function (d) {
                                return Data[item]["TaskId"] 
                            }); 

                            if (Data[item]["DependsOnWorkbasketTaskId"] != "") {
                                svg.append("line")
                                    .attr("x1", xScale(format.parse(Data[item]["TaskDate"])))
                                    .attr("y1", yScale(Data[item]["TaskNumber"]))
                                    .attr("x2", xScale(format.parse(Data[item]["DependantTaskDate"])))
                                    .attr("y2", yScale(Data[item]["DependantTaskNumber"]))
                                    .attr("stroke-width", 1)
                                    .attr("stroke", Data[item]["color"]);
                            }
                        }

                      var legendVals2 = ["Correct Dependancy", "Wrong Dependancy"]
                        var colorCodeValues = ["rgb(44, 160, 44)", "rgb(214, 39, 40)"]
                        function colorCode(code) {
                            return colorCodeValues[code];
                        }
                        var svgLegned4 = d3.select(".legend4").append("svg")
                            .attr("width", width)
                            .attr("height", height - 50)


                        var dataL = 0;
                        var offset = 150;
                   
                        var legend4 = svg.selectAll('.legends4')
                            .data(legendVals2)
                            .enter().append('g')
                            .attr("class", "legends4")
                            .attr("transform", function (d, i) {
                                if (i === 0) {
                                    dataL = d.length + offset
                                    return "translate(0,0)"
                                } else {
                                    var newdataL = dataL
                                    dataL += d.length + offset
                                    return "translate(" + (newdataL) + ",0)"
                                }
                            })

                        legend4.append('rect')
                            .attr("x", 10)
                            .attr("y", 5)
                            .attr("width", 55)
                            .attr("height", 5)
                            .style("fill", function (d, i) {
                                return colorCode(i)
                            })

                        legend4.append('text')
                            .attr("x", 65)
                            .attr("y", 10)
                            //.attr("dy", ".35em")
                            .text(function (d, i) {
                                return d
                            })
                            .attr("class", "textselected")
                            .style("text-anchor", "start")
                            .style("font-size", 10)

                        // draw legend
                        var legend = svg.selectAll(".legend")
                            .data(color.domain())
                            .enter().append("g")
                            .attr("class", "legend")
                            .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")"; });

                        // draw legend colored rectangles
                        legend.append("rect")
                            .attr("x", width - 18)
                            .attr("width", 18)
                            .attr("height", 18)
                            .style("fill", color);

                        // draw legend text
                        legend.append("text")
                            .attr("x", width - 24)
                            .attr("y", 9)
                            .attr("dy", ".35em")
                            .style("text-anchor", "end")
                            .text(function (d) {
                                return (TeamNames[d]);
                            })
                    }
                    $('.y .tick').remove();
                }
                else {

                    Command: toastr["error"](data.Message);
                    return false;
                }
            })

        }
        else {

            Command: toastr["error"]("Please Select Location and Period");
            return false;
        }

    };
    function showPleaseWait() {
        var modalLoading = '<div class="modal" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false" role="dialog">\
         <div class="modal-dialog">\
         <div class="modal-content">\
         <div class="modal-body">\
         <divs>\
         <h4 class="text-center">Please wait...</h4>\
         </div>\
         </div>\
         </div>\
         </div>\
         </div>';
        $(document.body).append(modalLoading);
        $("#pleaseWaitDialog").modal("show");
    }
    function hidePleaseWait() {
        $("#pleaseWaitDialog").modal("hide");
    }
    function responsivefy(svg) {
        // get container + svg aspect ratio
        var container = d3.select(svg.node().parentNode),
            width = parseInt(svg.style("width")),
            height = parseInt(svg.style("height")),
            aspect = width / height;

        // add viewBox and preserveAspectRatio properties,
        // and call resize so that svg resizes on inital page load
        svg.attr("viewBox", "0 0 " + width + " " + height)
            .attr("perserveAspectRatio", "xMinYMid")
            .call(resize);

        // to register multiple listeners for same event type, 
        // you need to add namespace, i.e., 'click.foo'
        // necessary if you call invoke this function for multiple svgs
        // api docs: https://github.com/mbostock/d3/wiki/Selections#on
        d3.select(window).on("resize." + container.attr("id"), resize);

        // get width of container and resize svg to fit it
        function resize() {
            var targetWidth = parseInt(container.style("width"));
            svg.attr("width", targetWidth);
            svg.attr("height", Math.round(targetWidth / aspect));
        }
    }
</script>

<script>
    $(window).load(function () {
        $(".loader").fadeOut("slow");
    });
    $('body').on('click', '.dot', function () {
        var tokenId = '<input name="__RequestVerificationToken" type="hidden" value="VNhRfXyTWH_kUxyZ-5ykSGElln40DMd3TOQuas_h8b53S9re2wbGo9lvRpX7zkrhNAdm7_GIJ3Diwu5-HIIhCfoy-blZ7F6U9qepDIFndVQLXXI86pz0bGLUtYvQYGY20" />';
        console.log($(this).text().substring($(this).text().indexOf('(') + 1, $(this).text().indexOf(')')));
        var WorkbasketTaskId = $(this).text().substring($(this).text().indexOf('(') + 1, $(this).text().indexOf(')'))
        var newText = $(this).text().substring($(this).text().indexOf(')') + 2);
        var taskName = newText.substring(0, newText.indexOf('('));
        console.log(taskName);
        // here you can do the logic of show model popup of that page.
        $(".loader").fadeIn("slow");
        var options = { "backdrop": "static", keyboard: true };
        $.ajax({

            url: '/Report/GetPopUpTaskDetails',
            data: { Id: WorkbasketTaskId, taskName: taskName },
            type: "Get",
            contentType: "application/json",
            success: function (data) {
                console.log('main : '+data);
                $('#myModalContent2').html(data);
                $('#myModal2').modal(options);
                $('#myModal2').modal('show');
               
            },
            error: function () {
                alert("Dynamic content load failed.");
            }
        });
        $(".loader").fadeOut("slow");
    } );
    $("#closbtn").click(function () {
        $('#myModal').modal('hide');
    });
</script>
<script>

    function submit_download_form(output_format) {
        // Get the d3js SVG element
        var tmp = document.getElementById("wrapper");
        //var svg = tmp.getElementsByTagName("svg")[0];


        // Extract the data as SVG text string

        var svg_xml = new XMLSerializer().serializeToString(tmp.getElementsByTagName("svg")[0]);

        // Submit the <FORM> to the server.
        // The result will be an attachment file to download.
        var form = document.getElementById("svgform");
        form['output_format'].value = output_format;
        form['data'].value = svg_xml;

       
        form.submit();
        //form.submit();
    }
    $("#save_as_svg").click(function () { submit_download_form("svg"); });
</script>


                    </section>
                </div>
            </div>
            <div class="page-footer">

                <p class="no-s ">
                    <strong>
                        Copyright
                        ©
                        <script type="text/javascript">
                            document.write(new Date().getFullYear());
                        </script>2018 <a href="#">WNS Holding Ltd</a>.
                    </strong> All rights reserved.
                </p>


            </div>
        </div>
        <!-- Page Inner -->

    </main>

    <!-- ./wrapper -->
    <!-- Javascripts -->

    <script src="/assets/plugins/jquery-ui/jquery-ui.min.js"></script>

    
    <script src="/assets/plugins/jquery-blockui/jquery.blockui.js"></script>
    <script src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="/assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script src="/assets/plugins/switchery/switchery.min.js"></script>
    <script src="/assets/plugins/uniform/jquery.uniform.min.js"></script>
    
    
    <script src="/assets/plugins/waves/waves.min.js"></script>
    
    <script src="/assets/plugins/waypoints/jquery.waypoints.min.js"></script>
    <script src="/assets/plugins/jquery-counterup/jquery.counterup.min.js"></script>
    <script src="/assets/plugins/toastr/toastr.min.js"></script>
    <script src="/assets/plugins/sweetalert/lib/sweetalert.min.js"></script>


    <script src="/assets/plugins/metrojs/MetroJs.min.js"></script>
    <script src="/assets/js/modern.js"></script>
    

    <script src="/Scripts/jTable/external/json2.js" type="text/javascript"></script>
    <script src="/Scripts/jtable/jquery.jtable.js" type="text/javascript"></script>
    <script src="/Scripts/JQ/ValidationEngine/js/jquery.validationEngine.js" type="text/javascript"></script>
    <script src="/Scripts/JQ/ValidationEngine/js/languages/jquery.validationEngine-en.js" type="text/javascript"></script>

    <!-- added by govind for rollover-->
    <link href="/assets/plugins/bootstrap-multiselect/bootstrap-multiselect.css" rel="stylesheet" type="text/css">
    <script src="/assets/plugins/bootstrap-multiselect/bootstrap-multiselect.js" type="text/javascript"></script>
    <script src="/assets/plugins/select2/js/select2.min.js"></script>
    <script src="/assets/plugins/select2/js/select2.full.min.js"></script>
    <!-- end govind for rollover-->

    <link href="/Scripts/jTable/themes/metro/eclose-default/jtable.css" rel="stylesheet" type="text/css">

    <link href="/Scripts/JQ/ValidationEngine/css/validationEngine.jquery.css" rel="stylesheet" type="text/css">
    <script src="/assets/plugins/bootstrap-datetimepicker/js/moment.min.js" type="text/javascript"></script>
    <script src="/assets/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
    <link href="/assets/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css" rel="stylesheet" type="text/css">
    <script src="/Scripts/jtable/extensions/jquery.jtable.editinline.js" type="text/javascript"></script>
    <!--Datattable-->
    <script src="/Scripts/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="/Scripts/eClose_Reports/buttons.html5.min.js" type="text/javascript"></script>
    <script src="/Scripts/eClose_Reports/dataTables.buttons.min.js" type="text/javascript"></script>
    <script src="/Scripts/eClose_Reports/jszip.min.js" type="text/javascript"></script>
    <script src="/Scripts/eClose_Reports/pdfmake.min.js" type="text/javascript"></script>
    <script src="/Scripts/eClose_Reports/vfs_fonts.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.validate.js"></script>&gt;

<!-- Visual Studio Browser Link -->
<script type="application/json" id="__browserLink_initializationData">
    {"appName":"Chrome","requestId":"a3347942adb247fe9a371086fc0dd65f"}
</script>
<script type="text/javascript" src="http://localhost:57997/312f7306e6834affbeaa1c6867c5fcfd/browserLink" async="async"></script>
<!-- End Browser Link -->








<script type="text/javascript">
    //Switch Role click event
    $("#useDetails").click(function(){
        $.ajax({
            type: "GET",
            cache: true,
            async: false,
            url: '/User/SwitchRolePopUp',
            datatype: "html",
            success: function (response) {
                $("#myModal").modal();
                $("#modal-body").html(response);
                $("#btnClose").show();
                $("#close").show();
            },
            error: function (response) {
                alert(response.responsetext);
            }
        });
    });

    //User Selected Role from User Role DropDown
    $(document).on('change', '#ddluserRole', function () {
        var token = '<input name="__RequestVerificationToken" type="hidden" value="2rLIW8cT8h9B6CUPa4mp61S3W9Mo0Ddzb95oB58kNCkF-fhCySwFq0Z_U6olMScqctHmyu6w86bkb6u5RBycUNRUJp0Ke8tRxCjLwkGj0G1rNuUM9hw_uEShUzYKjvCb0" />';
        $.ajax({
            type:"POST",
            url:'/Login/SetRoleInSession',
            data:{ 
                __RequestVerificationToken: $(token).val(),
                selectedRole:$("#ddluserRole").val() },
            datatype:'json',
            success:function(data){
                if (data.Role != "Fail") {
                    if (data.Role == "TenantAdmin") {
                        window.location.href = '/DashboardData';
                    }
                    else if (data.Role == "Controller") {
                        window.location.href = '/FinController';
                    }
                    else {
                        window.location.href = '/Dashboard';
                    }
                }
            },
            error:function(response){
                alert(response.responsetext);
            }
        });
    });

    //--- Session timeout check
    var g_pageTimer ;
    // Start timers.
    function StartTimers() {
        // remember our timers so we can cancel when we unload this page and reset them on the next page load
        g_pageTimer = window.setTimeout(ilSessionTimeout, 1200000);
    }


    // Reset timers.
    function ResetTimers() {
        window.clearTimeout(g_pageTimer);
        StartTimers();
    }

    function ilSessionTimeout() {

        window.location = '/Login/LogOut?errorMessage=Your%20session%20expired.';
    };
    // clean up anything that needs cleaning before we leave this page
    window.onbeforeunload = function(e) {
        // clear the timers
        window.clearTimeout(g_pageTimer);
    };
    //--- End Session timeout check

    //--- ExportToExcel starts here
    function JSONToCSVConvertor(JSONData, ReportTitle, ShowLabel) {
        //If JSONData is not an object then JSON.parse will parse the JSON string in an Object
        var arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;

        var CSV = '';

        //This condition will generate the Label/Header
        if (ShowLabel) {
            var row = "";

            //This loop will extract the label from 1st index of on array
            for (var index in arrData[0]) {

                //Now convert each value to string and comma-seprated
                row += index + ',';
            }

            row = row.slice(0, -1);

            //append Label row with line break
            CSV += row + '\r\n';
        }

        //1st loop is to extract each row
        for (var i = 0; i < arrData.length; i++) {
            var row = "";

            //2nd loop will extract each column and convert it in string comma-seprated
            for (var index in arrData[i]) {
                row += '"' + arrData[i][index] + '",';
            }

            row.slice(0, row.length - 1);

            //add a line break after each row
            CSV += row + '\r\n';
        }

        if (CSV == '') {
            alert("Invalid data");
            return;
        }
        var fileName = ReportTitle;
        if (msieversion()) {
            var IEwindow = window.open();
            IEwindow.document.write('sep=,\r\n' + CSV);
            IEwindow.document.close();
            IEwindow.document.execCommand('SaveAs', true, fileName + ".csv");
            IEwindow.close();
        } else {
            //Initialize file format you want csv or xls
            var uri = 'data:text/csv;charset=utf-8,' + escape(CSV);

            //this trick will generate a temp <a /> tag
            var link = document.createElement("a");
            link.href = uri;

            //set the visibility hidden so it will not effect on your web-layout
            link.style = "visibility:hidden";
            link.download = fileName + ".csv";

            //this part will append the anchor tag and remove it after automatic click
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    }

    function msieversion() {
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf("MSIE ");
        if (msie == 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./)) // If Internet Explorer, return true
        {
            return true;
        } else { // If another browser,
            return false;
        }
        return false;
    }

    //--- End Export to Excel

    function BindOpenPeriod(){

        $.ajax({
            url: '/Period/GetOpenPeriodsForTenant',
            type: "Get",
            cache: false,
            data: { tenantId: '57' },
            success: function(data) {

                $.each(data.Records, function (index, value) {
                    $("#opnPeriods").append('<span class="comma">'+value+'</span>');
                });
            }
        });
    }

    $(document).ready(function(){
        document.addEventListener("keydown", keyDownTextField, false);
        function keyDownTextField(e) {
            if (e.which == 13) {
                var $focused = $(':focus');
                $focused.focus().click();
            }
        }

        //alert(window.location.pathname);
        if($("#opnPeriods").length>0)
        {
            BindOpenPeriod();
        }

        $("div").removeClass('ui-icon-gripsmall-diagonal-se, ui-icon');



        $(".menu").find('a').each(function(){
            if($(this).attr("href")==window.location.pathname)
                // alert($(this).attr("href")==window.location.pathname);
                $(this).parents().addClass('active open') ;
            $(".menu li.active ul.sub-menu").attr('style', 'display:block;');
            //$(this).parent().parent().parent().addClass('active');
        } )


        //$(".sub-menu").find( "li.active" ).each(function(){

        //    if($(this).attr("href")==window.location.pathname)

        //        $(this).parent().addClass('open active');
        //    $(this).parent().attr('style', 'display:block;');
        //} )

    })

    //var activeurl = window.location.pathname.replace(/.*\//, '');
    //$('.menu').find('a[href="' + activeurl + '"]').parents('ul.sub-meu').siblings('a').addClass('active');

    //$(document).ready(function() {
    //    $('select').select2();


    //});


    $(window).load(function() {
        $('select.form-control').select2();
        toastr.options = {
            "closeButton": true,
            "debug": false,
            "newestOnTop": true,
            "progressBar": true,
            "positionClass": "toast-top-center",
            "preventDuplicates": true,
            "onclick": null,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        }

    });

</script>
<div class="modal" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false" role="dialog" aria-hidden="true" style="display: none;">         <div class="modal-dialog">         <div class="modal-content">         <div class="modal-body">         <divs>         <h4 class="text-center">Please wait...</h4>         </divs></div>         </div>         </div>         </div>         <div class="modal" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false" role="dialog">         <div class="modal-dialog">         <div class="modal-content">         <div class="modal-body">         <divs>         <h4 class="text-center">Please wait...</h4>         </divs></div>         </div>         </div>         </div>         <div class="modal" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false" role="dialog">         <div class="modal-dialog">         <div class="modal-content">         <div class="modal-body">         <divs>         <h4 class="text-center">Please wait...</h4>         </divs></div>         </div>         </div>         </div>         <div class="modal" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false" role="dialog">         <div class="modal-dialog">         <div class="modal-content">         <div class="modal-body">         <divs>         <h4 class="text-center">Please wait...</h4>         </divs></div>         </div>         </div>         </div>         <div class="modal" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false" role="dialog">         <div class="modal-dialog">         <div class="modal-content">         <div class="modal-body">         <divs>         <h4 class="text-center">Please wait...</h4>         </divs></div>         </div>         </div>         </div>         </body></html>
